import{_ as a,c as i,o as s,a2 as e}from"./chunks/framework.Sicmpk4x.js";const u=JSON.parse('{"title":"Bag","description":"","frontmatter":{},"headers":[],"relativePath":"plugins/bag.md","filePath":"plugins/bag.md"}'),t={name:"plugins/bag.md"},l=e('<h1 id="bag" tabindex="-1">Bag <a class="header-anchor" href="#bag" aria-label="Permalink to &quot;Bag&quot;">​</a></h1><h2 id="物品类型" tabindex="-1">物品类型 <a class="header-anchor" href="#物品类型" aria-label="Permalink to &quot;物品类型&quot;">​</a></h2><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> BagItem</span></span></code></pre></div><blockquote><p>Import 位置： <code>src.plugins.nonebot_plugin_bag.item.BagItem</code></p></blockquote><h3 id="属性" tabindex="-1">属性 <a class="header-anchor" href="#属性" aria-label="Permalink to &quot;属性&quot;">​</a></h3><ul><li><code>index</code> (<code>int</code>): 在用户背包中的位置</li><li><code>stack</code> (<a href="https://github.com/Moonlark-Dev/Moonlark/blob/main/src/plugins/nonebot_plugin_item/base/stack.py#L13" target="_blank" rel="noreferrer"><code>ItemStack</code></a>): 物品</li></ul><h3 id="方法" tabindex="-1">方法 <a class="header-anchor" href="#方法" aria-label="Permalink to &quot;方法&quot;">​</a></h3><p>一般的使用中不需要用到此类提供的方法，可前往 <a href="https://github.com/Moonlark-Dev/Moonlark/blob/main/src/plugins/nonebot_plugin_bag/item/__init__.py#L16" target="_blank" rel="noreferrer">源代码</a> 阅读。</p><h2 id="物品锁" tabindex="-1">物品锁 <a class="header-anchor" href="#物品锁" aria-label="Permalink to &quot;物品锁&quot;">​</a></h2><p>为了防止 Bug 造成的意外，我们给背包中的每组物品添加了物品锁定。在背包物品操作类（<code>BagItem</code>）中，没有锁定的物品的更改将不会写入数据库。</p><p>物品数据的更改会在 <code>BagItem</code> 对象销毁时保存，已上锁的物品会在 <code>BagItem</code> 对象被销毁或启动时自动解锁。</p><h2 id="获取物品" tabindex="-1">获取物品 <a class="header-anchor" href="#获取物品" aria-label="Permalink to &quot;获取物品&quot;">​</a></h2><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> get_bag_item</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(user_id: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, index: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, ignore_lock: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">bool</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> False</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) -&gt; BagItem</span></span></code></pre></div><blockquote><p>Import 位置： <code>src.plugins.nonebot_plugin_bag.utils.item.get_bag_item</code></p></blockquote><h3 id="参数" tabindex="-1">参数 <a class="header-anchor" href="#参数" aria-label="Permalink to &quot;参数&quot;">​</a></h3><ul><li><code>user_id</code>: 用户</li><li><code>index</code>: 物品索引位置</li><li><code>ignore_lock</code>: 是否忽略物品锁定（忽略后不会上锁物品）</li></ul><h3 id="返回" tabindex="-1">返回 <a class="header-anchor" href="#返回" aria-label="Permalink to &quot;返回&quot;">​</a></h3><p><code>BagItem</code> - 物品对象</p><h3 id="异常" tabindex="-1">异常 <a class="header-anchor" href="#异常" aria-label="Permalink to &quot;异常&quot;">​</a></h3><ul><li><code>IndexError</code> - 找不到物品</li><li><code>ItemLockedError</code> - 物品已锁定</li></ul><h2 id="获取物品列表" tabindex="-1">获取物品列表 <a class="header-anchor" href="#获取物品列表" aria-label="Permalink to &quot;获取物品列表&quot;">​</a></h2><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> get_bag_items</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(user_id: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, ignore_lock: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">bool</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> False</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, ignore_locked_item: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">bool</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> True</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) -&gt; list[BagItem]</span></span></code></pre></div><blockquote><p>Import 位置： <code>src.plugins.nonebot_plugin_bag.utils.item.get_bag_items</code></p></blockquote><h3 id="参数-1" tabindex="-1">参数 <a class="header-anchor" href="#参数-1" aria-label="Permalink to &quot;参数&quot;">​</a></h3><ul><li><code>user_id</code>: 用户</li><li><code>ignore_lock</code>: 是否忽略物品锁定（忽略后不会上锁物品）</li><li><code>ignore_locked_item</code>: 忽略上锁的物品（忽略后将在因物品被锁定而上锁失败时主动忽略物品）</li></ul><h3 id="返回-1" tabindex="-1">返回 <a class="header-anchor" href="#返回-1" aria-label="Permalink to &quot;返回&quot;">​</a></h3><p><code>list[BagItem]</code> - 物品列表</p><h3 id="异常-1" tabindex="-1">异常 <a class="header-anchor" href="#异常-1" aria-label="Permalink to &quot;异常&quot;">​</a></h3><ul><li><code>IndexError</code> - 找不到物品</li><li><code>ItemLockedError</code> - 物品已锁定</li></ul><h2 id="给予物品" tabindex="-1">给予物品 <a class="header-anchor" href="#给予物品" aria-label="Permalink to &quot;给予物品&quot;">​</a></h2><blockquote><p>Import 位置： <code>src.plugins.nonebot_plugin_bag.utils.give</code></p></blockquote><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>以下列出的两种方法等效但是接受的物品列表类型不一致。</p></div><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> give_item_by_list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(user_id: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, items: list[DictItemData]) -&gt; </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">None</span></span></code></pre></div><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> give_item_by_data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(user_id: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, items: GivenItemsData) -&gt; </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">None</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span></code></pre></div><h3 id="参数类型" tabindex="-1">参数类型 <a class="header-anchor" href="#参数类型" aria-label="Permalink to &quot;参数类型&quot;">​</a></h3><ul><li><code>list[DictItemData]</code>: <a href="https://github.com/Moonlark-Dev/Moonlark/blob/main/src/plugins/nonebot_plugin_item/types.py#L5" target="_blank" rel="noreferrer">查看定义</a></li><li><code>GivenITemsData</code>: <a href="https://github.com/Moonlark-Dev/Moonlark/blob/main/src/plugins/nonebot_plugin_bag/types.py#L15" target="_blank" rel="noreferrer">查看定义</a></li></ul>',36),n=[l];function o(h,r,d,p,k,c){return s(),i("div",null,n)}const b=a(t,[["render",o]]);export{u as __pageData,b as default};
